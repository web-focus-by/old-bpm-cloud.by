import React, {useState} from "react"
import Modal from 'react-modal';
import classnames from "classnames"

import styles from "./Cirlce.module.scss"
import { useForm, ValidationError } from '@formspree/react';


const Cirlce = () => {

  const [modalIsOpen,setIsOpen] = useState(false);
  function openModal() {
    setIsOpen(true);
  }
 
  function afterOpenModal() {
    // references are now sync'd and can be accessed.

  }
 
  function closeModal(){
    setIsOpen(false);
  }
  return (
    <div className={styles.circle}>
      <svg
        viewBox="0 0 192 192"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        onClick={openModal}
      >
        <g clipPath="url(#clip0)">
          <circle
            cx="95.935"
            cy="95.5307"
            r="58"
            transform="rotate(63.9197 95.935 95.5307)"
            stroke="#309195"
            strokeWidth="20"
          />
          <path
            d="M46.2446 81.9067C47.3329 78.0992 45.4913 74.5213 41.8742 73.4874C38.2571 72.4535 34.8028 74.5176 33.7144 78.3251C32.6212 82.1499 34.485 85.7155 38.0848 86.7444C41.6847 87.7734 45.1513 85.7315 46.2446 81.9067ZM43.8563 81.224C43.2379 83.3874 41.198 84.5641 38.8961 83.9061C36.5943 83.2482 35.4844 81.1712 36.1028 79.0078C36.7212 76.8444 38.7611 75.6678 41.0629 76.3257C43.3647 76.9837 44.4746 79.0607 43.8563 81.224Z"
            fill="white"
          />
          <path
            d="M51.5132 68.5245L55.145 63.7787C57.114 61.2057 57.0829 58.8473 55.0816 57.3158C53.1662 55.85 51.1415 56.3632 49.2928 58.7789L47.1706 61.5521L45.1122 59.9769L49.5316 54.2018L47.6876 52.7907L41.507 60.8671L51.5132 68.5245ZM51.559 64.9104L48.8717 62.8539L50.6438 60.5381C51.5736 59.3231 52.4728 59.0366 53.3591 59.7148C54.2597 60.404 54.2391 61.4082 53.3312 62.5947L51.559 64.9104Z"
            fill="white"
          />
          <path
            d="M68.9182 51.7575C70.7769 50.5881 71.894 48.9496 72.1232 47.0829L69.6185 46.6172C69.4296 47.9056 68.799 48.8977 67.7325 49.5687C65.7367 50.8243 63.4379 50.314 62.1727 48.3029C60.9075 46.2918 61.4426 43.9987 63.4385 42.7431C64.505 42.0721 65.6722 41.9332 66.9059 42.3054L67.5703 39.846C65.7979 39.2597 63.8374 39.5574 61.9938 40.7172C58.6724 42.8068 57.6516 46.6601 59.674 49.8749C61.6965 53.0896 65.612 53.8374 68.9182 51.7575Z"
            fill="white"
          />
          <path
            d="M85.8043 32.0297L83.8022 39.3606L79.1435 33.4182L76.095 34.0537L82.8465 42.0972L82.7702 42.2602C82.4487 43.0995 81.9685 43.5305 81.2637 43.6774C80.8936 43.7546 80.47 43.7509 79.9824 43.7055L79.747 46.0161C80.493 46.1548 81.192 46.1562 81.844 46.0203C83.5004 45.675 84.7646 44.4186 85.3899 42.3025L88.6061 31.4457L85.8043 32.0297Z"
            fill="white"
          />
          <path
            d="M109.775 43.0624L111.403 32.9688L101.842 31.4269L101.072 35.2956C100.386 38.7586 99.5476 41.3582 97.9219 41.1507L97.4243 41.0704L96.6126 45.99L99.2782 46.4199L99.6938 43.8432L108.472 45.259L108.057 47.8357L110.722 48.2656L111.516 43.3432L109.775 43.0624ZM103.571 35.972L103.916 34.1681L108.181 34.8559L106.931 42.6038L101.369 41.7067C102.386 40.8314 103.037 38.6026 103.571 35.972Z"
            fill="white"
          />
          <path
            d="M117.196 48.1047L119.565 49.508L128.912 45.5247L124.738 52.5716L127.216 54.0392L133.637 43.1978L131.283 41.8036L121.927 45.8024L126.11 38.7401L123.616 37.2633L117.196 48.1047Z"
            fill="white"
          />
          <path
            d="M148.893 58.7351L141.943 50.3045L140.109 51.8159L142.663 54.9131L134.774 61.4166L136.606 63.6388L144.495 57.1354L147.059 60.2465L148.893 58.7351Z"
            fill="white"
          />
          <path
            d="M152.668 75.4608L151.535 72.4639L155.407 70.9997L154.383 68.289L142.597 72.7452L144.609 78.0656C145.754 81.0962 147.839 82.3862 150.55 81.3613C153.092 80.4 153.744 78.3062 152.668 75.4608ZM146.572 77.1502L145.642 74.692L149.515 73.2278L150.444 75.686C150.979 77.1003 150.758 78.1458 149.462 78.636C148.132 79.1389 147.1 78.5476 146.572 77.1502Z"
            fill="white"
          />
          <path
            d="M160.179 102.684L147.832 100.172L147.254 103.012L157.273 105.05L156.139 110.624L146.12 108.586L145.543 111.425L157.89 113.937L160.179 102.684Z"
            fill="white"
          />
          <path
            d="M150.236 130.206L153.161 125.602L142.527 118.844L140.963 121.306L143.895 123.169L142.534 125.311C140.728 128.152 141.073 130.866 143.442 132.372C145.828 133.887 148.431 133.046 150.236 130.206ZM144.626 126.449L145.9 124.443L149.592 126.789L148.318 128.794C147.362 130.299 146.196 130.624 145.026 129.88C143.871 129.147 143.67 127.953 144.626 126.449Z"
            fill="white"
          />
          <path
            d="M126.63 137.074C123.43 139.407 122.682 143.36 124.898 146.4C127.114 149.44 131.107 149.937 134.307 147.605C137.522 145.261 138.245 141.304 136.04 138.278C133.834 135.253 129.845 134.73 126.63 137.074ZM128.094 139.081C129.912 137.756 132.244 138.083 133.654 140.017C135.064 141.952 134.662 144.272 132.844 145.597C131.026 146.923 128.694 146.596 127.283 144.661C125.873 142.727 126.275 140.407 128.094 139.081Z"
            fill="white"
          />
          <path
            d="M112.033 147.358L112.795 150.172L107.148 151.702L107.741 153.891L113.388 152.361L114.103 155.002L107.709 156.734L108.321 158.992L117.512 156.503L114.218 144.341L104.801 146.892L105.413 149.15L112.033 147.358Z"
            fill="white"
          />
          <path
            d="M88.9639 147.034L85.6631 146.762L89.3619 153.604L84.7544 159.33L87.822 159.582L91.5409 154.777L93.6219 154.949L93.2037 160.026L96.092 160.263L97.1263 147.706L94.238 147.468L93.8214 152.527L91.8122 152.361L88.9639 147.034Z"
            fill="white"
          />
          <path
            d="M64.963 152.335L74.9417 156.785L75.9095 154.615L72.2435 152.98L76.4076 143.642L73.7773 142.469L69.6132 151.807L65.9308 150.165L64.963 152.335Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0">
            <rect
              width="137"
              height="137"
              fill="white"
              transform="translate(191.418 80.7344) rotate(126.108)"
            />
          </clipPath>
        </defs>
      </svg>
      <Modal
       isOpen={modalIsOpen}
       onAfterOpen={afterOpenModal}
       onRequestClose={closeModal}
       className={styles.modalWrapper}
       contentLabel="Обсудить проект"
      >
        <div onClick={closeModal} className={styles.closeModal}>
            <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="0.335938" y="2.12109" width="3" height="33" transform="rotate(-45 0.335938 2.12109)" fill="#D1D9E3"/>
              <rect x="23.3359" y="0.121094" width="3" height="33" transform="rotate(45 23.3359 0.121094)" fill="#D1D9E3"/>
            </svg>
          </div>
          <Form/>
      </Modal>
    </div>
  )
}

const Form = () =>{
  const [fileName, setFileName] = useState('Прикрепить файл')
  const [state, handleSubmit] = useForm("xoqpgozg");
  if (state.succeeded) {
      return (
        <div className={classnames(styles.successPage)}>
          <div className={styles.successPageText}>
            <h2>Отлично!</h2>
            <span>Мы свяжемся с Вами в ближайшее время для более детального обсуждения проекта</span>
          </div>
          <div className={styles.buttonWrapper}>
            <button className = {classnames(styles.button, styles.modalButton)} onChange={handleChange}>
              Окей, я жду
            </button>
          </div>
        </div>
        );
  }

  const handleChange = event => {
    const fileUploaded = event.target.files[0];
    setFileName(fileUploaded.name)
    console.log(fileUploaded)
  };
  return(
    <div className={classnames(styles.modalContentWrapper)}>
        <h2>Обсудить проект</h2>
        <form onSubmit={handleSubmit} className={styles.modalForm}>
        <input className={styles.input} placeholder="Имя" type="text" required />
        <input
          className={styles.input}
          placeholder="Номер телефона"
          type="text"
          name='phone'
          required
        />
        <input className={styles.input} placeholder="E-mail" name='E-mail' type="text" required/>
        <input className={styles.input} placeholder="Компания" type="text" name='Компания'/>
        <textarea placeholder="Опишите задачу" className={styles.textarea} name='Описание задачи' required/>
        <input className={styles.invisibleInput} type="file" name='file' id='modalFileInput' onChange={handleChange}/>
        <label className={styles.addFile} htmlFor="modalFileInput">
        <svg width="29" height="32" viewBox="0 0 29 32" >
            <path
              id={styles.modalSkrepka}
              d="M5.24477 21.7157C4.95906 21.4305 4.73235 21.0917 4.5776 20.7188C4.42284 20.3459 4.34307 19.9462 4.34285 19.5425L4.34828 13.3975C4.34806 12.9936 4.42745 12.5936 4.58191 12.2204C4.73638 11.8472 4.96289 11.5081 5.2485 11.2225C5.5341 10.9369 5.8732 10.7104 6.24641 10.5559C6.61962 10.4015 7.01961 10.3221 7.42352 10.3223L22.7888 10.3223C23.5984 10.3414 24.3696 10.6715 24.9422 11.2441C25.5148 11.8168 25.845 12.5879 25.864 13.3975L25.8586 16.4673C25.8588 16.8712 25.7794 17.2711 25.625 17.6443C25.4705 18.0176 25.244 18.3566 24.9584 18.6422C24.6728 18.9279 24.3337 19.1544 23.9605 19.3088C23.5873 19.4633 23.1873 19.5427 22.7834 19.5425L10.4933 19.5425C9.67771 19.5425 8.89552 19.2185 8.3188 18.6417C7.74208 18.065 7.41808 17.2829 7.41808 16.4673C7.41808 15.6517 7.74208 14.8695 8.3188 14.2928C8.89552 13.7161 9.67771 13.3921 10.4933 13.3921L20.4851 13.3975L20.5068 14.9623H10.5205C10.1127 14.9623 9.72158 15.1243 9.43322 15.4126C9.14486 15.701 8.98287 16.0921 8.98287 16.4999C8.98287 16.9077 9.14486 17.2987 9.43322 17.5871C9.72158 17.8755 10.1127 18.0375 10.5205 18.0375L22.7888 18.0049C22.9908 18.005 23.1908 17.9653 23.3774 17.888C23.564 17.8108 23.7335 17.6976 23.8763 17.5548C24.0191 17.412 24.1324 17.2424 24.2096 17.0558C24.2868 16.8692 24.3265 16.6692 24.3264 16.4673L24.321 13.3975C24.3211 13.1955 24.2814 12.9956 24.2042 12.809C24.1269 12.6224 24.0137 12.4528 23.8709 12.31C23.7281 12.1672 23.5585 12.0539 23.3719 11.9767C23.1853 11.8995 22.9853 11.8598 22.7834 11.8599L7.41808 11.8599C7.21613 11.8598 7.01613 11.8995 6.82953 11.9767C6.64293 12.0539 6.47338 12.1672 6.33057 12.31C6.18777 12.4528 6.07451 12.6224 5.99728 12.809C5.92005 12.9956 5.88035 13.1955 5.88047 13.3975L5.8859 19.5425C5.88579 19.7444 5.92548 19.9444 6.00271 20.131C6.07995 20.3176 6.1932 20.4871 6.33601 20.6299C6.47881 20.7727 6.64836 20.886 6.83496 20.9632C7.02157 21.0405 7.22156 21.0802 7.42352 21.08L20.4634 21.08L20.4688 22.6068L7.42895 22.6068C7.02414 22.6094 6.6228 22.5321 6.24797 22.3791C5.87315 22.2262 5.53222 22.0008 5.24477 21.7157Z"
              fill="#fa5c45"
            />
          </svg>
          <div className={styles.textAdd}>{fileName}</div>
        </label>
        <button type="submit" disabled={state.submitting} className={styles.button}>
            ЗАКАЗАТЬ ЗВОНОК
        </button>
        </form>
    </div>
  )
}

export default Cirlce
